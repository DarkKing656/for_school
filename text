void search_file(FILE* file_ptr, const char* search_string, int case_insensitive, 
                int inverse_match, int count_only, int print_filename_only, int line_number, int multiple_files, const char* name) {
    
    char line[MAX_LINE_LENGTH];
    int match_count = 0;
    int current_line_number = 0;

    while (fgets(line, MAX_LINE_LENGTH, file_ptr)) {
        current_line_number++;

        char* match_ptr;
        if (case_insensitive) {
            match_ptr = strcasestr(line, search_string);
        } else {
            match_ptr = strstr(line, search_string);
        }

        int match_found = (match_ptr != NULL);
        if (match_found != inverse_match) {
            match_count++;
            if (print_filename_only) {
                if (line_number) {
                    
                    printf("%s:%d\n", name, current_line_number);
                    
                } else {if(multiple_files>1){
                    printf("%s\n", name);
                }
                }
                break;
            }
            if (line_number) {
                if(multiple_files>1){

                
                printf("%s:%d:%s", name, current_line_number, line);
                }
                else{
                    printf("%d:%s", current_line_number,line);
                }
            } else {
                if(multiple_files>1){
                    printf("%s:%s",name,line);
                } 
                else {
                printf("%s", line);
                }
            }
        }
    }

    if (count_only) {
        printf("Количество совпадений: %d\n", match_count);
    }
}
